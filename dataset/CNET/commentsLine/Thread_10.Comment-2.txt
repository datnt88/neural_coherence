it all really depends exactly what you want to do.
in the exact case you specify and assuming that you are using the same subnet for all the machines the solution to this problem is called private vlan.
this is a advanced vlan topic where the switch will not allow ports on the same subnet to talk to each other it will force the traffic via a firewall port.
this is generally done this way to preserve ip addresses.
you could place each machine on its own subnet and vlan and then use a more general ip based firewall solution but it depends on your requirements.
in any case you need a firewall.
if you can get one that contains enough ports you could plug all your machines directly into the firewall and avoid a switch and the private vlan issue.
firewall tend to get very expensive the more ports you buy so most people use external switches.
needless to say you need commercial firewalls to do this, most consumer ones do not have the ability to run as passive (ie layer 2) firewalls.
the only cheap solution i have seen involves running a consumer router that can run dd-wrt firmware.
this has many more advanced features and might do what you want.
it will not work at a layer 2 level so you would have to redefine your need so that your machines were in different ip ranges and define rules between the ip blocks.
if you have a lot of traffic between the machines this will not work well on cheaper routers mostly because they do not have the cpu capacity.
of course if you dig there are methods to use a pc as a router running linux.
you could then build your own firewall of any size you wish but it is not a beginner project.
